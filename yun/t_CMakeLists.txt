cmake_minimum_required(VERSION 3.13)

project( google-test )

#enable_testing()

option(BUILD_GTEST "Builds the googletest subproject" ON)
option(BUILD_GMOCK "Builds the googlemock subproject" OFF)

if(BUILD_GMOCK)
  add_subdirectory( googletest/googlemock )
elseif(BUILD_GTEST)
  add_subdirectory( googletest/googletest )
endif()

SET(CMAKE_CXX_FLAGS "-g -O0 --coverage -fprofile-arcs -ftest-coverage")
SET(CMAKE_C_FLAGS "-g -O0 --coverage -fprofile-arcs -ftest-coverage")

add_library(fshare STATIC fshared.c fshared.h)

include_directories(.)
include_directories(googletest/googletest/include)
add_executable(runTest testFshare.cc)
target_link_libraries(runTest gtest gtest_main)
target_link_libraries(runTest fshare)